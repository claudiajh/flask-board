{% extends "layout.html" %}

{% block body %}

    {% include 'header.html' %}
    <div class="ui stacked segment">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="ui negative message">
                <i class="close icon"></i>
                <div class="header">
                    {% for message in messages %}
                        {{ message }}
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% endwith %}
        <div class="ui teal segment">
            <h3 class="ui left floated header">
                {{ doc_view.title }}
            </h3>
            <h3 class="ui right floated sub header">
                작성자 : {{ doc_view.user_id }} {{ doc_view.create_time }}</h3>
            <div class="ui clearing divider"></div>
            <div class="ui left aligned header">{{ doc_view.content }}</div>

            <div class="ui buttons">
                <a class="ui red basic button" href="{{ url_for('doc_update', doc_id=doc_view.id) }}">글 수정</a>
                <a class="ui blue basic button" href="{{ url_for('doc_delete', doc_id=doc_view.id) }}">글삭제</a>
                <a class="ui green basic button" href="{{ url_for('doc_index') }}">글 목록</a>
            </div>

            <div class="ui divider"></div>

            <div class="ui list">
                {% if comment_view != 0 %}
                    {% for comment in comment_view %}
                        <div class="item" style="text-align: left;">
                            <div class="ui red horizontal label">{{ comment.username }}</div>
                            {{ comment.content }}
                            <a href="{{ url_for('delete_comment', comment_id=comment.id) }}">
                                <i class="remove circle outline icon right floated"></i>
                            </a>
                            <a href="{{ url_for('doc_index') }}">
                                <i class="write icon right floated"></i>
                            </a>
                            <div class="ui right floated">{{ comment.create_time }}</div>
                        </div>
                    {% endfor %}
                {% endif %}
                <div class="item">
                    <form class="ui form" action="{{ url_for('add_comment', doc_id = doc_view.id) }}" method="post">
                        <div class="field">
                            <textarea name="comment" rows="2" placeholder="Comments...."></textarea>
                        </div>
                        <button class="ui right aligned teal mini button">댓글 쓰기</button>
                    </form>
                </div>
            </div>

        </div>
    </div>
{% endblock %}
